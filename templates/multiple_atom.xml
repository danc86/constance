<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:xhtml="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
	  xmlns:xi="http://www.w3.org/2001/XInclude">

<?python
import config
from viewutils import tag_list
ATOM_TIME_FORMAT = str('%Y-%m-%dT%H:%M:%S+10:00')
?>

<id>${config.ABSOLUTE_BASE_URL}/?format=atom</id>
<title type="text">${config.BLOG_NAME}</title>
<link rel="self" type="application/atom+xml" href="${config.ABSOLUTE_BASE_URL}/?format=atom" />
<link rel="alternate" href="${config.ABSOLUTE_BASE_URL}/" />
<generator>Danâ€™s blogging engine</generator>
<updated>${feed_updated.strftime(ATOM_TIME_FORMAT)}</updated>

<entry py:for="entry in sorted_entries">
	<id>${entry.guid()}</id>
	<published>${entry.publication_date.strftime(ATOM_TIME_FORMAT)}</published>
	<updated>${entry.modified_date.strftime(ATOM_TIME_FORMAT)}</updated>
	<author>
		<name>${config.BLOG_AUTHOR}</name>
		<email py:if="config.BLOG_EMAIL">${config.BLOG_EMAIL}</email>
	</author>
	<category py:for="category in entry.categories" scheme="${config.ABSOLUTE_BASE_URL}/+categories/" term="${category}" />
	<category py:for="tag in entry.tags" scheme="${config.ABSOLUTE_BASE_URL}/+tags/" term="${tag}" />
	<py:if test="'Reading' not in entry.categories">
		<link rel="alternate" href="${config.ABSOLUTE_BASE_URL}/${entry.id}" />
		<title type="text">${entry.title}</title>
		<content type="xhtml" xml:base="${config.ABSOLUTE_BASE_URL}/${entry.id}"><xhtml:div>
			${entry.body}
			<p py:if="entry.tags">
				<img src="${config.ABSOLUTE_BASE_URL}/static/images/tag_blue.png" alt="Tags:" />
				${tag_list(entry.tags)}
			</p>
		</xhtml:div></content>
	</py:if>
	<py:if test="'Reading' in entry.categories">
		<title type="text">${entry.title} by ${entry.author}</title>
		<summary type="text">${entry.rating} stars</summary>
		<content type="xhtml"><xhtml:div>
			<p><a href="${entry.url}">${entry.title}</a> by ${entry.author}</p>
			<p>${entry.rating} stars</p>
		</xhtml:div></content>
	</py:if>
</entry>

</feed>
