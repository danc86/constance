<feed xmlns="http://www.w3.org/2005/Atom"
      xmlns:py="http://genshi.edgewall.org/"
	  xmlns:xi="http://www.w3.org/2001/XInclude">

<?python
from viewutils import ATOM_TIME_FORMAT
sorted_items = sorted(items, key=lambda item: item.publication_date, reverse=True)
?>

<id>${template_config.get('website')}/reading.atom</id>
<title type="text">Reading log</title>
<link rel="self" type="application/atom+xml" href="${template_config.get('website')}/reading.atom" />
<link rel="alternate" href="${template_config.get('website')}/reading" />
<generator>constance</generator>
<updated py:if="sorted_items">${max(item.modified_date for item in sorted_items).strftime(ATOM_TIME_FORMAT)}</updated>

<py:for each="item in sorted_items">
    ${item.generate_atom(template_config)}
</py:for>

</feed>
