<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
	  xmlns:xi="http://www.w3.org/2001/XInclude"
	  lang="en-AU">
<xi:include href="_commonwrapper.xml" />

<head>
  <title>${entry.title}</title>
</head>
<body>

<div class="entry">

	<h3 class="entrytitle" id="post-${entry.id}"><a href="${entry.permalink()}" rel="bookmark">${entry.title}</a></h3>

	<div class="entrymeta">
		Posted ${entry.publication_date.strftime(str('%-1d %B %Y'))}
		<py:if test="entry.categories">
			in
			<py:with vars="category = entry.categories[0]">
				<a href="${BASE_URL}/+categories/${category}">${category}</a>
			</py:with>
			<py:for each="category in entry.categories[1:]">
				, <a href="${BASE_URL}/+categories/${category}">${category}</a>
			</py:for>
		</py:if>
	</div>
  
	<div class="entrybody">
		${Markup(entry.body)}
		<p py:if="entry.tags">
			<img src="${BASE_URL}/static/images/tag_blue.png" alt="Tags:" /> ${', '.join(entry.tags)}
		</p>
	</div>

</div>

<div id="commentblock"
	 py:if="entry.has_comments()"
	 py:with="comments = sorted(entry.comments(), key=lambda c: c.date)">
	<h2 id="comments">${len(comments) == 1 and '1 comment' or '%d comments' % len(comments)} so far</h2>
    <ol class="commentlist" id="commentlist">
		<li py:for="n, comment in enumerate(comments)"
			class="${(n % 2) and 'alt' or 'standard'}"
			id="comment-${comment.id}">
			<div class="commentname">
				<a py:strip="not comment.author_url" href="${comment.author_url}">${comment.author_name()}</a>
				on <a href="#comment-${comment.id}">${comment.date.strftime(str('%-1d %B %Y'))}</a>
			</div>
			<div class="commenttext">
				<div class="commentp">
					${Markup(comment.body)}
				</div>
			</div>
		</li>
	</ol>
</div>

</body>
</html>
